--结果显示模块的程序设计
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_UNSIGNED;
USE IEEE.STD_LOGIC_ARITH;

--结果显示模块的接口设计
ENTITY result IS
	PORT(
		CLK_RESULT:IN STD_LOGIC;--系统时钟
		EN_RESULT:IN STD_LOGIC;--使能信号
		STATE_GAME_TIME_LEFT:IN INTEGER RANGE 0 TO 40;--从游戏主界面模块接收倒计时信息
		STATE_GAME_SCORE:IN INTEGER RANGE 0 TO 19;--从游戏主界面模块接收分数信息
		FLG_WIN:OUT STD_LOGIC;--判断胜负，控制点阵显示
		RESULT_TIME_LEFT:OUT INTEGER RANGE 0 TO 40;--输出游戏结束时的剩余时间，控制数码管显示
		RESULT_SCORE:OUT INTEGER RANGE 0 TO 19--输出游戏结束时的得分信息，控制数码管显示
	);
END ENTITY;

ARCHITECTURE resultScreen OF result IS

BEGIN
	
	PROCESS(CLK_RESULT)
	BEGIN
		IF CLK_RESULT'EVENT AND CLK_RESULT='1' THEN
			IF EN_RESULT='1' THEN
				IF STATE_GAME_SCORE>=15 THEN--根据得分信息判断输赢
					FLG_WIN<='1';
				ELSE
					FLG_WIN<='0';
				END IF;
				RESULT_TIME_LEFT<=STATE_GAME_TIME_LEFT;--将从游戏主界面模块获得的分数、时间信息输出
				RESULT_SCORE<=STATE_GAME_SCORE;
			END IF;
		END IF;
	END PROCESS;

END resultScreen;